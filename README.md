# 代码说明

- 主函数

  angle_estimation，主要进程在process方法内，处理手掌图像输入，通过mediapipe估计对应rgb图像手掌处21个关键点，或者直接输入21个关键点在ir图像的坐标

- 参数

  默认参数设置在option_parser，包含调用mediapipe的参数

  额外设置在angle_estimation开头，包含输入/输出地址，取样半径，关键点组。其中关键点组是写死的，改动时需要配合调用处改动，其中tri_kpt_idx为计算法向量的三角形参考点，all_kpt_idx为掌心关键点

- 方法

  关于图片的方法在palm_image，其中sample_v1为取样方法，根据关键点选取不同改动

- 可视化

  vis生成输出图片

- 检验

  examination，检验输入图片是否符合格式，这里包含了id（文件名）的确认

- 计算逻辑

  根据ir图中给定点处的像素值作为参考深度值，作为z轴计算手掌朝向，由此需要在手掌掌心确定三个点来估算法向量

  这里采用的samplev1采样方法是参考掌心的五个点取样，取点5和点9的中间点，点13和点17的中间点，作为两个参考点B，C，再将点0作为A点向BC连线移动1/3长度，得到最终的三角形ABC

# 待改动

- 目前计算法向量夹角的方法要求手腕-指尖一线需要保持竖直，需要代入平面法向量参数进行修改

- 这里取两点的中间点是屏幕坐标的平均，并没有进行投影插值矫正

- 静脉提取的代码在Palm_Vein目录下，可以进一步根据掌静脉位置减少掌纹带来的误差

- 21关键点输入格式为（图片数，21，2），其中坐标范围为[0,1]，乘以宽/高后得到像素位置

